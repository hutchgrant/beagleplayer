<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Strict//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-strict.dtd">
<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <style type="text/css">
            body { margin: 0; font-size: 2em; background-color: white; }
            h1 { text-align: center; color: red; }
            h1 + h1 { color: green; }
            h1:last-child { color: blue; }
            main { }
            .track_head { }
            .track_buttons { }
            .track_foot { }
            .track_buttons { }
            .track_button { display:inline; padding:2px; }
            .buttons {  display:inline; list-style-type: none; }
            #quit { background-color: gray; color: white; font-weight: bold; display: block; text-align: right; }
        </style>
        <link rel="stylesheet" href="js/jquery-ui-1.11.3/jquery-ui.theme.css" >
        <link rel="stylesheet" href="css/smoothness.css" >
         <link href="css/bootstrap.min.css" rel="stylesheet">
        <script src="js/jquery-2.1.3.min.js"></script>
         <script src="js/jquery-ui-1.11.3/jquery-ui.js"></script>
        <script>
            var TrackName = "";
            var TrackPos = 0;
            var TrackRange = 0;
            var TrackVolume = 0;
        </script>
        <script>
        $(function() {

            var seekSlider = "#seek_slider", seekVal = "#seek_amount";
            var volSlider = "#vol_slider", volVal = "#vol_amount";
            var firstRun;

            TrackName = detached.getTrack();
            document.getElementById("track_title").innerHTML = TrackName;
            TrackRange = detached.getRange();
            TrackVolume = detached.getVolume();
            console.log(TrackVolume)
            console.log(TrackRange);
            createSlider(0,0,TrackRange,seekSlider, seekVal)
            createSlider(TrackVolume,0,100,volSlider, volVal)

            function createSlider(init, min, max, sliderName, sliderVal){
              $( sliderName ).slider({
                range: "min",
                value: init,
                min: min,
                max: max,
                slide: function( event, ui ) {
                  $( sliderVal ).val( ui.value );
                }
              });
              $( sliderVal ).val( $( sliderName ).slider( "value" ) );
            }

          var timer=setInterval(function () {checkWidget()}, 500);
          function checkWidget(){

              TrackName = detached.getTrack();
              document.getElementById("track_title").innerHTML = TrackName;

              TrackPos = detached.getSeekPos();
              $( seekSlider ).slider( "value", TrackPos );

              TrackRange = detached.getRange();    // { min: 0, max : 100 }; // Get Track Min/Max Range Time
              $( seekSlider ).slider( "option", "max", TrackRange );

              TrackVolume = detached.getVolume();
              console.log(TrackVolume);
               $( volSlider ).slider( "value", TrackVolume );

          }

          function sendRemoteCmd(cmd){
              detached.remoteCmd(cmd)
          }
        });
        </script>

    </head>
    <body>

        <div class="main">
        <div class="track_head center">
            <h1 id="track_title">Track</h1>

            <div id="TrackSeek" class="example yui3-skin-sam"> <!-- You need this skin class -->
                <p>
                <h4>00:00:00</h4>
                  <input type="text" id="seek_amount" readonly style="border:0; color:#f6931f; font-weight:bold;">
                </p>
                <div id="seek_slider"></div>
            </div>
        </div>
        <div class="track_buttons center">
            <ul class="buttons">
               <li class="track_button"><button onclick="sendRemoteCmd(5)">Prev</button></li>
               <li class="track_button"><button onclick="sendRemoteCmd(3)">Stop</button></li>
               <li class="track_button"><button onclick="sendRemoteCmd(2)">Pause</button></li>
               <li class="track_button"><button onclick="sendRemoteCmd(1)">Play</button></li>
               <li class="track_button"><button onclick="sendRemoteCmd(4)">Next</button></li>
            </ul>
        </div>
        <div class="track_foot center"></div>
               <div id="TrackVolume" class="example yui3-skin-sam"> <!-- You need this skin class -->
                   <p>
                   <label for="vol_amount">Volume:</label>
                   <input type="text" id="vol_amount" readonly style="border:0; color:#f6931f; font-weight:bold;">
                 </p>
                 <div id="vol_slider"></div>
                   </p>
               </div>
        </div>

    </body>
</html>
